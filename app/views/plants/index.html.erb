<% provide(:title, "All Plants") %>

<h1>契約工場一覧</h1>

<div class="row">
  <div class="col-xs-12 col-md-6 col-md-offset-3">
    <%= will_paginate %>
    <table class="table table-bordered table-condensed table-hover" id="user-plants-table">
      <thead>
        <tr>
          <td width=50%><%= link_to "新規工場登録", new_user_plant_path(@user), class: "btn btn-md btn-primary" %></td>
          <th width=50%>電話番号(1)</th>
        </tr>
      </thead>
      <tbody>
        <% @plants.each do |plant| %>
          <tr data-href="<%= user_plant_path(@user, plant) %>">
            <td><%= plant.name %></td>
            <td><%= plant.tel_1 %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <%= will_paginate %>
  </div>
</div>

<script>
jQuery(function($) {
  $('tbody tr[data-href]').addClass('clickable').click( function() {
      window.location = $(this).attr('data-href');
  }).find('a').hover( function() {
      $(this).parents('tr').unbind('click');
  }, function() {
      $(this).parents('tr').click( function() {
          window.location = $(this).attr('data-href');
      });
  });
});
</script>